version: '3.9'
services:
  base:
    env_file:
      - .env
    container_name: ide-base
    image: ide-base:latest
    hostname: machine
    build:
      context: .
      dockerfile: ./base.Dockerfile
      args:
        - TZ=${TZ}
        - LANG=${LANG}
        - LC_ALL=${LC_ALL}
        - LANGUAGE=${LANGUAGE}

  home:
    env_file:
      - .env
    container_name: ide-home
    image: ide-home:latest
    hostname: machine
    build:
      context: .
      dockerfile: ./home.Dockerfile
      args:
        # User
        - USERNAME=${USERNAME}
        - HOME=${HOME}
        - PASSWORD=${PASSWORD}
        - USER_ID=${USER_ID}
        - GROUP_ID=${GROUP_ID}
        - GROUPNAME=${GROUPNAME}
        - HOSTNAME=${HOSTNAME}
        - WORKSPACE=${WORKSPACE}
        - GIT_USERNAME=${GIT_USERNAME}
        - GIT_EMAIL=${GIT_EMAIL}
        - EDITOR=${EDITOR}
        - TZ=${TZ}
        - LANGUAGE=${LANGUAGE}
        - LANG=${LANG}
        - LC_ALL=${LC_ALL}
        # Shell 
        - SHELL=${SHELL}
        - SHELL_SESSIONS_DISABLE=1
        - TERM=${TERM}
        # TODO: Finish settings vars from .env
        # XDG
        - XDG_CONFIG_HOME=${HOME}/.config 
        - XDG_CACHE_HOME=${HOME}/.cache 
        - XDG_DATA_HOME=${HOME}/.local/share 
        - XDG_RUNTIME_DIR=${HOME}/.xdg 
        - XDG_STATE_HOME=${HOME}/.local/state 
        - XDG_BIN_HOME=${HOME}/.local/bin 
        - XDG_FONTS_HOME=${HOME}/.local/fonts
        # Oh-my-zsh
        - KEEP_ZSHRC=${KEEP_ZSHRC}
        - ZSH=${XDG_DATA_HOME}/oh-my-zsh 
        - ZSH_CUSTOM=${ZDOTDIR}/custom
        # ZSH
        - ZDOTDIR=${XDG_CONFIG_HOME}/zsh
        - EXPORTS_FILE=${ZDOTDIR}/exports.env
        # NODE
        - NVM_DIR=${XDG_CONFIG_HOME}/nvm 
        - NODE_VER=${NODE_VER}
        - NODE_ENVIRONMENT=development 
        # Neovim
        - NEOVIM_VER=${NEOVIM_VER}
        - NEOVIM_DIR=${XDG_DATA_HOME}/neovim 
        # Rust
        - CARGO_HOME=${HOME}/.cargo 
        - RUSTUP_HOME=${XDG_DATA_HOME}/rustup 
        # Golang
        - GOLANG_VER=${GOLANG_VER}
        - GOROOT=${XDG_DATA_HOME}/go 
        - GOPATH=${HOME}/go
        # Dotfiles
        - DOTFILES=${HOME}/.config/dotfiles 

  editor:
    env_file:
      - .env
    container_name: ide-editor 
    image: ide-editor:latest
    hostname: machine
    build:
      context: .
      dockerfile: ./editor.Dockerfile
      args:
        - USERNAME=${USERNAME}
        - HOME=${HOME}
        - PASSWORD=${PASSWORD}
        - USER_ID=${USER_ID}
        - GROUP_ID=${GROUP_ID}
        - GROUPNAME=${GROUPNAME}
        - HOSTNAME=${HOSTNAME}
        - GIT_USERNAME=${GIT_USERNAME}
        - GIT_EMAIL=${GIT_EMAIL}
        - EDITOR=${EDITOR}
        - TZ=${TZ}
        - LANGUAGE=${LANGUAGE}
        - LANG=${LANG}
        - LC_ALL=${LC_ALL}
        - SHELL=${SHELL}
        - TERM=${TERM}
        - NODE_VER=${NODE_VER}
        - NEOVIM_VER=${NEOVIM_VER}
        - GOLANG_VER=${GOLANG_VER}
        # TODO: Finish settings vars from .env
        - DOTFILES=${HOME}/.config/dotfiles 
        - WORKSPACE=${HOME}/workspace
        - XDG_CONFIG_HOME=${HOME}/.config 
        - XDG_CACHE_HOME=${HOME}/.cache 
        - XDG_DATA_HOME=${HOME}/.local/share 
        - XDG_RUNTIME_DIR=${HOME}/.xdg 
        - XDG_STATE_HOME=${HOME}/.local/state 
        - XDG_BIN_HOME=${HOME}/.local/bin 
        - XDG_FONTS_HOME=${HOME}/.local/fonts
        - SHELL_SESSIONS_DISABLE=1
        - ZDOTDIR=${XDG_CONFIG_HOME}/zsh
        - ZSH=${XDG_DATA_HOME}/oh-my-zsh 
        - ZSH_CUSTOM=${ZDOTDIR}/custom
        - NODE_ENVIRONMENT=development 
        - NEOVIM_DIR=${XDG_DATA_HOME}/neovim 
        - CARGO_HOME=${HOME}/.cargo 
        - NVM_DIR=${XDG_CONFIG_HOME}/nvm 
        - RUSTUP_HOME=${XDG_DATA_HOME}/rustup 
        - GOROOT=${XDG_DATA_HOME}/go 
        - GOPATH=${HOME}/go
        - BOOTSTRAP_FILE=${DOTFILES}/main.sh 
        - EXPORTS_FILE=${ZDOTDIR}/exports.env

